{"version":3,"sources":["../../src/repository/RepositoryAggregator.ts"],"names":[],"mappings":";;AAMA,yDAAsD;AACtD,0CAA8C;AAE9C;;GAEG;AACH;IA0BI,4EAA4E;IAC5E,cAAc;IACd,4EAA4E;IAE5E,8BAAY,UAAsB,EAAE,QAAwB,EAAE,mBAAyC;QACnG,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAEzB,IAAM,OAAO,GAAG,4BAAgB,CAAC,qCAAiB,CAAC,CAAC;QAEpD,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,oBAAoB,CAAC,UAAU,EAAE,QAAQ,EAAE,mBAAmB,CAAC,CAAC;QACpH,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,gBAAgB,CAAC,UAAU,EAAE,QAAQ,EAAE,mBAAmB,CAAC,CAAC;QAC1F,CAAC;QAED,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,wBAAwB,CAAC,UAAU,EAAE,QAAQ,EAAE,mBAAmB,CAAC,CAAC;IAC1G,CAAC;IAEL,2BAAC;AAAD,CA5CA,AA4CC,IAAA;AA5CY,oDAAoB","file":"RepositoryAggregator.js","sourcesContent":["import {Repository} from \"./Repository\";\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\nimport {SpecificRepository} from \"./SpecificRepository\";\nimport {Connection} from \"../connection/Connection\";\nimport {TreeRepository} from \"./TreeRepository\";\nimport {QueryRunnerProvider} from \"../query-runner/QueryRunnerProvider\";\nimport {RepositoryFactory} from \"./RepositoryFactory\";\nimport {getFromContainer} from \"../container\";\n\n/**\n * Aggregates all repositories of the specific metadata.\n */\nexport class RepositoryAggregator {\n\n    // -------------------------------------------------------------------------\n    // Public Readonly properties\n    // -------------------------------------------------------------------------\n\n    /**\n     * Entity metadata which owns repositories.\n     */\n    public readonly metadata: EntityMetadata;\n\n    /**\n     * Ordinary repository.\n     */\n    public readonly repository: Repository<any>;\n\n    /**\n     * Tree repository.\n     */\n    public readonly treeRepository?: TreeRepository<any>;\n\n    /**\n     * Repository with specific functions.\n     */\n    public readonly specificRepository: SpecificRepository<any>;\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(connection: Connection, metadata: EntityMetadata, queryRunnerProvider?: QueryRunnerProvider) {\n        this.metadata = metadata;\n\n        const factory = getFromContainer(RepositoryFactory);\n\n        if (metadata.table.isClosure) {\n            this.repository = this.treeRepository = factory.createTreeRepository(connection, metadata, queryRunnerProvider);\n        } else {\n            this.repository = factory.createRepository(connection, metadata, queryRunnerProvider);\n        }\n\n        this.specificRepository = factory.createSpecificRepository(connection, metadata, queryRunnerProvider);\n    }\n\n}"],"sourceRoot":".."}